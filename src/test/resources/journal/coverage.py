#!/usr/bin/env python

import os
import subprocess
import sys
import json
import copy

hyperion_jar = "./target/hyperion-shaded-1.0-SNAPSHOT.jar"

# fullteaching
#sut_path = "../full-teaching-master/"
#prolog_facts = "./src/test/resources/journal/fullteaching-concrete.pl"
#regex_list = "./src/test/resources/sose/URI-regex-list.pl"

#trainticket
sut_path = "../train-ticket/"
prolog_facts = "./src/test/resources/journal/trainticket-concrete.pl"
regex_list = "./src/test/resources/gauss/URI-regex-list.pl"

# Simmetriche: nonemptyEqSeq, nonemptyEqSet
# Asimmetriche: nonemptyIntersection, nonemptySubSet, nonemptySubSeq, nonemptyCommonSeq

#metrics = ["nonemptyCommonSeq"]
# metrics = ["nonemptyIntersection", "nonemptySubSet", "nonemptyEqSet", "nonemptyEqSeq", "nonemptySubSeq", "nonemptyCommonSeq"]
#metrics = ["nonemptyIntersection", "nonemptySubSet", "nonemptyEqSet"]
metrics = ["random"]
#domains = ["endpoint"]
domains = ["invokes"]
similarity_thresholds = range(10,620,20)
#similarity_thresholds = [0.5]
repetitions = 10

# Make SWI Prolog happy for running
my_env = {**os.environ,
          "SWI_HOME_DIR":"/usr/lib/swipl/",
          "CLASSPATH":"/usr/lib/swipl/lib/jpl.jar:$CLASSPATH",
          "LD_LIBRARY_PATH":"/usr/lib/swipl/lib/x86_64-linux/",
          "LD_PRELOAD":"/usr/lib/swipl/lib/x86_64-linux/libswipl.so",
         }

# Prepare folders
def prepare_folders():
    print("****** PREPARING FOLDERS *******")
    for metric in metrics:
        for domain in domains:
            for threshold in similarity_thresholds:
                for rep in range(repetitions):
                    os.makedirs("experiment/"+metric+"/"+domain+"-"+str(threshold)+"/"+str(rep)+"/", exist_ok=True)

# Run Symbolic Execution
def run_symbolic():
    print("****** SYMBOLIC EXECUTION *******")
    conf = (
            "{"
              "\"sut\": [\""+sut_path+"/target/classes/\"],"
              "\"testPrograms\": [\""+sut_path+"/target/test-classes/\"],"
              "\"includeTest\": [],"
              "\"excludeTest\": [],"
              "\"additionalClasspath\": [],"
              "\"excludeTracedPackages\": ["
                "\"it/cnr/saks/hyperion\","
                "\"java/\","
                "\"sun/\","
                "\"com/google/gson\""
              "],"
              "\"depth\": 100,"
              "\"outputFile\": \"./src/test/resources/journal/fullteaching-symbolic.pl\""
            "}"
           )
    with open("conf.json",'w',encoding = 'utf-8') as f:
        f.write(conf)
        f.close()
        process = subprocess.Popen("java -jar " + hyperion_jar + " --analyze conf.json",
                shell=True, stdout=sys.stdout, stderr=subprocess.STDOUT,
                env = my_env)
        process.wait()
    
# Generate similarity data
def generate_similarity():
     print("****** COMPUTING SIMILARITY *******")
     for metric in metrics:
         if metric == "random":
             continue
         for domain in domains:
             conf = ("{"
                     "\"invokes\": [\"" + prolog_facts + "\""
                     "],"
                     "\"regex\": \"" + regex_list + "\","
                     "\"metric\": \"" + metric + "\","
                     "\"outputFile\": \"experiment/similarTPs-" + metric + "-" + domain +".json\","
                     "\"domain\": \"" + domain + "\""
                     "}")
             with open("conf.json",'w',encoding = 'utf-8') as f:
                 f.write(conf)
                 f.close()
                 process = subprocess.Popen("java -Xmx10240m -XX:-UseGCOverheadLimit -classpath /usr/lib/jvm/java-8-openjdk/jre/lib/charsets.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/cldrdata.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/dnsns.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/jaccess.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/localedata.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/nashorn.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/sunec.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/sunpkcs11.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/ext/zipfs.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/jce.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/jfr.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/jsse.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/management-agent.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/resources.jar:/usr/lib/jvm/java-8-openjdk/jre/lib/rt.jar:/home/pellegrini/git/CNR/hyperion/target/classes:/home/pellegrini/.m2/repository/org/javassist/javassist/3.27.0-GA/javassist-3.27.0-GA.jar:/home/pellegrini/.m2/repository/org/slf4j/slf4j-simple/1.7.30/slf4j-simple-1.7.30.jar:/home/pellegrini/.m2/repository/org/slf4j/slf4j-api/1.7.25/slf4j-api-1.7.25.jar:/home/pellegrini/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.10.3/jackson-core-2.10.3.jar:/home/pellegrini/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.10.5.1/jackson-databind-2.10.5.1.jar:/home/pellegrini/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.10.3/jackson-annotations-2.10.3.jar:/home/pellegrini/.m2/repository/com/github/olivergondza/maven-jdk-tools-wrapper/0.1/maven-jdk-tools-wrapper-0.1.jar:/usr/lib/jvm/java-8-openjdk/lib/tools.jar:/home/pellegrini/.m2/repository/com/github/SWI-Prolog/packages-jpl/V8.3.2/packages-jpl-V8.3.2.jar:/home/pellegrini/.m2/repository/info/picocli/picocli/4.6.1/picocli-4.6.1.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-web/1.4.1.RELEASE/spring-boot-starter-web-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter/1.4.1.RELEASE/spring-boot-starter-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-logging/1.4.1.RELEASE/spring-boot-starter-logging-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/ch/qos/logback/logback-classic/1.1.7/logback-classic-1.1.7.jar:/home/pellegrini/.m2/repository/ch/qos/logback/logback-core/1.1.7/logback-core-1.1.7.jar:/home/pellegrini/.m2/repository/org/slf4j/log4j-over-slf4j/1.7.25/log4j-over-slf4j-1.7.25.jar:/home/pellegrini/.m2/repository/org/yaml/snakeyaml/1.17/snakeyaml-1.17.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/1.4.1.RELEASE/spring-boot-starter-tomcat-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/8.5.5/tomcat-embed-core-8.5.5.jar:/home/pellegrini/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/8.5.5/tomcat-embed-el-8.5.5.jar:/home/pellegrini/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/8.5.5/tomcat-embed-websocket-8.5.5.jar:/home/pellegrini/.m2/repository/org/hibernate/hibernate-validator/5.2.4.Final/hibernate-validator-5.2.4.Final.jar:/home/pellegrini/.m2/repository/javax/validation/validation-api/1.1.0.Final/validation-api-1.1.0.Final.jar:/home/pellegrini/.m2/repository/org/jboss/logging/jboss-logging/3.3.0.Final/jboss-logging-3.3.0.Final.jar:/home/pellegrini/.m2/repository/com/fasterxml/classmate/1.3.1/classmate-1.3.1.jar:/home/pellegrini/.m2/repository/org/springframework/spring-web/4.3.3.RELEASE/spring-web-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-beans/4.3.3.RELEASE/spring-beans-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-context/4.3.3.RELEASE/spring-context-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-webmvc/4.3.3.RELEASE/spring-webmvc-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-expression/4.3.3.RELEASE/spring-expression-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-data-jpa/1.4.1.RELEASE/spring-boot-starter-data-jpa-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-aop/1.4.1.RELEASE/spring-boot-starter-aop-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/aspectj/aspectjweaver/1.8.9/aspectjweaver-1.8.9.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-jdbc/1.4.1.RELEASE/spring-boot-starter-jdbc-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/apache/tomcat/tomcat-jdbc/8.5.5/tomcat-jdbc-8.5.5.jar:/home/pellegrini/.m2/repository/org/apache/tomcat/tomcat-juli/8.5.5/tomcat-juli-8.5.5.jar:/home/pellegrini/.m2/repository/org/springframework/spring-jdbc/4.3.3.RELEASE/spring-jdbc-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/hibernate/hibernate-core/5.0.11.Final/hibernate-core-5.0.11.Final.jar:/home/pellegrini/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar:/home/pellegrini/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/home/pellegrini/.m2/repository/org/jboss/jandex/2.0.0.Final/jandex-2.0.0.Final.jar:/home/pellegrini/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/pellegrini/.m2/repository/org/hibernate/common/hibernate-commons-annotations/5.0.1.Final/hibernate-commons-annotations-5.0.1.Final.jar:/home/pellegrini/.m2/repository/org/hibernate/hibernate-entitymanager/5.0.11.Final/hibernate-entitymanager-5.0.11.Final.jar:/home/pellegrini/.m2/repository/javax/transaction/javax.transaction-api/1.2/javax.transaction-api-1.2.jar:/home/pellegrini/.m2/repository/org/springframework/data/spring-data-jpa/1.10.3.RELEASE/spring-data-jpa-1.10.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/data/spring-data-commons/1.12.3.RELEASE/spring-data-commons-1.12.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-orm/4.3.3.RELEASE/spring-orm-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-tx/4.3.3.RELEASE/spring-tx-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-aspects/4.3.3.RELEASE/spring-aspects-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-security/1.4.1.RELEASE/spring-boot-starter-security-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-aop/4.3.3.RELEASE/spring-aop-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/security/spring-security-config/4.1.3.RELEASE/spring-security-config-4.1.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/security/spring-security-web/4.1.3.RELEASE/spring-security-web-4.1.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-devtools/1.4.1.RELEASE/spring-boot-devtools-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot/1.4.1.RELEASE/spring-boot-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/1.4.1.RELEASE/spring-boot-autoconfigure-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/mysql/mysql-connector-java/5.1.39/mysql-connector-java-5.1.39.jar:/home/pellegrini/.m2/repository/commons-validator/commons-validator/1.5.1/commons-validator-1.5.1.jar:/home/pellegrini/.m2/repository/commons-beanutils/commons-beanutils/1.9.2/commons-beanutils-1.9.2.jar:/home/pellegrini/.m2/repository/commons-digester/commons-digester/2.1/commons-digester-2.1.jar:/home/pellegrini/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/pellegrini/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-websocket/1.4.1.RELEASE/spring-boot-starter-websocket-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-messaging/4.3.3.RELEASE/spring-messaging-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-websocket/4.3.3.RELEASE/spring-websocket-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/apache/tika/tika-core/1.22/tika-core-1.22.jar:/home/pellegrini/.m2/repository/org/apache/tika/tika-parsers/1.22/tika-parsers-1.22.jar:/home/pellegrini/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jaxb-runtime-2.3.2.jar:/home/pellegrini/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.2/jakarta.xml.bind-api-2.3.2.jar:/home/pellegrini/.m2/repository/org/glassfish/jaxb/txw2/2.3.2/txw2-2.3.2.jar:/home/pellegrini/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.8/istack-commons-runtime-3.0.8.jar:/home/pellegrini/.m2/repository/org/jvnet/staxex/stax-ex/1.8.1/stax-ex-1.8.1.jar:/home/pellegrini/.m2/repository/com/sun/xml/fastinfoset/FastInfoset/1.2.16/FastInfoset-1.2.16.jar:/home/pellegrini/.m2/repository/com/sun/activation/jakarta.activation/1.2.1/jakarta.activation-1.2.1.jar:/home/pellegrini/.m2/repository/xerces/xercesImpl/2.12.0/xercesImpl-2.12.0.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-lang3/3.9/commons-lang3-3.9.jar:/home/pellegrini/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/home/pellegrini/.m2/repository/org/gagravarr/vorbis-java-tika/0.8/vorbis-java-tika-0.8.jar:/home/pellegrini/.m2/repository/org/tallison/jmatio/1.5/jmatio-1.5.jar:/home/pellegrini/.m2/repository/org/apache/james/apache-mime4j-core/0.8.3/apache-mime4j-core-0.8.3.jar:/home/pellegrini/.m2/repository/org/apache/james/apache-mime4j-dom/0.8.3/apache-mime4j-dom-0.8.3.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-compress/1.18/commons-compress-1.18.jar:/home/pellegrini/.m2/repository/org/tukaani/xz/1.8/xz-1.8.jar:/home/pellegrini/.m2/repository/com/epam/parso/2.0.11/parso-2.0.11.jar:/home/pellegrini/.m2/repository/org/brotli/dec/0.1.2/dec-0.1.2.jar:/home/pellegrini/.m2/repository/commons-codec/commons-codec/1.10/commons-codec-1.10.jar:/home/pellegrini/.m2/repository/org/apache/pdfbox/pdfbox/2.0.16/pdfbox-2.0.16.jar:/home/pellegrini/.m2/repository/org/apache/pdfbox/fontbox/2.0.16/fontbox-2.0.16.jar:/home/pellegrini/.m2/repository/org/apache/pdfbox/pdfbox-tools/2.0.16/pdfbox-tools-2.0.16.jar:/home/pellegrini/.m2/repository/org/apache/pdfbox/jempbox/1.8.16/jempbox-1.8.16.jar:/home/pellegrini/.m2/repository/org/bouncycastle/bcmail-jdk15on/1.62/bcmail-jdk15on-1.62.jar:/home/pellegrini/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.62/bcpkix-jdk15on-1.62.jar:/home/pellegrini/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.62/bcprov-jdk15on-1.62.jar:/home/pellegrini/.m2/repository/org/apache/poi/poi/4.0.1/poi-4.0.1.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-collections4/4.2/commons-collections4-4.2.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar:/home/pellegrini/.m2/repository/org/apache/poi/poi-scratchpad/4.0.1/poi-scratchpad-4.0.1.jar:/home/pellegrini/.m2/repository/org/apache/poi/poi-ooxml/4.0.1/poi-ooxml-4.0.1.jar:/home/pellegrini/.m2/repository/org/apache/poi/poi-ooxml-schemas/4.0.1/poi-ooxml-schemas-4.0.1.jar:/home/pellegrini/.m2/repository/org/apache/xmlbeans/xmlbeans/3.0.2/xmlbeans-3.0.2.jar:/home/pellegrini/.m2/repository/com/github/virtuald/curvesapi/1.05/curvesapi-1.05.jar:/home/pellegrini/.m2/repository/com/healthmarketscience/jackcess/jackcess/3.0.1/jackcess-3.0.1.jar:/home/pellegrini/.m2/repository/com/healthmarketscience/jackcess/jackcess-encrypt/3.0.0/jackcess-encrypt-3.0.0.jar:/home/pellegrini/.m2/repository/org/ccil/cowan/tagsoup/tagsoup/1.2.1/tagsoup-1.2.1.jar:/home/pellegrini/.m2/repository/org/ow2/asm/asm/7.2-beta/asm-7.2-beta.jar:/home/pellegrini/.m2/repository/com/googlecode/mp4parser/isoparser/1.1.22/isoparser-1.1.22.jar:/home/pellegrini/.m2/repository/com/drewnoakes/metadata-extractor/2.11.0/metadata-extractor-2.11.0.jar:/home/pellegrini/.m2/repository/com/adobe/xmp/xmpcore/5.1.3/xmpcore-5.1.3.jar:/home/pellegrini/.m2/repository/de/l3s/boilerpipe/boilerpipe/1.1.0/boilerpipe-1.1.0.jar:/home/pellegrini/.m2/repository/com/rometools/rome/1.12.1/rome-1.12.1.jar:/home/pellegrini/.m2/repository/com/rometools/rome-utils/1.12.1/rome-utils-1.12.1.jar:/home/pellegrini/.m2/repository/org/gagravarr/vorbis-java-core/0.8/vorbis-java-core-0.8.jar:/home/pellegrini/.m2/repository/com/googlecode/juniversalchardet/juniversalchardet/1.0.3/juniversalchardet-1.0.3.jar:/home/pellegrini/.m2/repository/org/codelibs/jhighlight/1.0.3/jhighlight-1.0.3.jar:/home/pellegrini/.m2/repository/com/pff/java-libpst/0.8.1/java-libpst-0.8.1.jar:/home/pellegrini/.m2/repository/com/github/junrar/junrar/4.0.0/junrar-4.0.0.jar:/home/pellegrini/.m2/repository/org/apache/cxf/cxf-rt-rs-client/3.3.2/cxf-rt-rs-client-3.3.2.jar:/home/pellegrini/.m2/repository/org/apache/cxf/cxf-rt-transports-http/3.3.2/cxf-rt-transports-http-3.3.2.jar:/home/pellegrini/.m2/repository/org/apache/cxf/cxf-core/3.3.2/cxf-core-3.3.2.jar:/home/pellegrini/.m2/repository/com/fasterxml/woodstox/woodstox-core/5.0.3/woodstox-core-5.0.3.jar:/home/pellegrini/.m2/repository/org/codehaus/woodstox/stax2-api/3.1.4/stax2-api-3.1.4.jar:/home/pellegrini/.m2/repository/org/apache/ws/xmlschema/xmlschema-core/2.2.4/xmlschema-core-2.2.4.jar:/home/pellegrini/.m2/repository/org/glassfish/jaxb/jaxb-xjc/2.3.2/jaxb-xjc-2.3.2.jar:/home/pellegrini/.m2/repository/org/glassfish/jaxb/xsom/2.3.2/xsom-2.3.2.jar:/home/pellegrini/.m2/repository/org/glassfish/jaxb/codemodel/2.3.2/codemodel-2.3.2.jar:/home/pellegrini/.m2/repository/com/sun/xml/bind/external/rngom/2.3.2/rngom-2.3.2.jar:/home/pellegrini/.m2/repository/com/sun/xml/dtd-parser/dtd-parser/1.4.1/dtd-parser-1.4.1.jar:/home/pellegrini/.m2/repository/com/sun/istack/istack-commons-tools/3.0.8/istack-commons-tools-3.0.8.jar:/home/pellegrini/.m2/repository/com/sun/xml/bind/external/relaxng-datatype/2.3.2/relaxng-datatype-2.3.2.jar:/home/pellegrini/.m2/repository/org/apache/cxf/cxf-rt-frontend-jaxrs/3.3.2/cxf-rt-frontend-jaxrs-3.3.2.jar:/home/pellegrini/.m2/repository/jakarta/ws/rs/jakarta.ws.rs-api/2.1.5/jakarta.ws.rs-api-2.1.5.jar:/home/pellegrini/.m2/repository/org/apache/cxf/cxf-rt-security/3.3.2/cxf-rt-security-3.3.2.jar:/home/pellegrini/.m2/repository/javax/xml/ws/jaxws-api/2.3.0/jaxws-api-2.3.0.jar:/home/pellegrini/.m2/repository/javax/xml/soap/javax.xml.soap-api/1.4.0/javax.xml.soap-api-1.4.0.jar:/home/pellegrini/.m2/repository/com/sun/activation/javax.activation/1.2.0/javax.activation-1.2.0.jar:/home/pellegrini/.m2/repository/org/apache/geronimo/specs/geronimo-ws-metadata_2.0_spec/1.1.3/geronimo-ws-metadata_2.0_spec-1.1.3.jar:/home/pellegrini/.m2/repository/com/sun/xml/messaging/saaj/saaj-impl/1.4.0-b03/saaj-impl-1.4.0-b03.jar:/home/pellegrini/.m2/repository/org/jvnet/mimepull/mimepull/1.9.7/mimepull-1.9.7.jar:/home/pellegrini/.m2/repository/org/jacorb/jacorb-omgapi/3.7/jacorb-omgapi-3.7.jar:/home/pellegrini/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1.1/geronimo-jta_1.1_spec-1.1.1.jar:/home/pellegrini/.m2/repository/org/jboss/spec/javax/rmi/jboss-rmi-api_1.0_spec/1.0.6.Final/jboss-rmi-api_1.0_spec-1.0.6.Final.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-exec/1.3/commons-exec-1.3.jar:/home/pellegrini/.m2/repository/org/apache/opennlp/opennlp-tools/1.9.1/opennlp-tools-1.9.1.jar:/home/pellegrini/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar:/home/pellegrini/.m2/repository/com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar:/home/pellegrini/.m2/repository/com/github/openjson/openjson/1.0.11/openjson-1.0.11.jar:/home/pellegrini/.m2/repository/com/google/code/gson/gson/2.7/gson-2.7.jar:/home/pellegrini/.m2/repository/org/slf4j/jul-to-slf4j/1.7.25/jul-to-slf4j-1.7.25.jar:/home/pellegrini/.m2/repository/org/slf4j/jcl-over-slf4j/1.7.25/jcl-over-slf4j-1.7.25.jar:/home/pellegrini/.m2/repository/edu/ucar/netcdf4/4.5.5/netcdf4-4.5.5.jar:/home/pellegrini/.m2/repository/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar:/home/pellegrini/.m2/repository/org/jdom/jdom2/2.0.6/jdom2-2.0.6.jar:/home/pellegrini/.m2/repository/edu/ucar/grib/4.5.5/grib-4.5.5.jar:/home/pellegrini/.m2/repository/org/itadaki/bzip2/0.9.1/bzip2-0.9.1.jar:/home/pellegrini/.m2/repository/net/java/dev/jna/jna/4.2.2/jna-4.2.2.jar:/home/pellegrini/.m2/repository/org/jsoup/jsoup/1.12.1/jsoup-1.12.1.jar:/home/pellegrini/.m2/repository/com/google/protobuf/protobuf-java/3.9.0/protobuf-java-3.9.0.jar:/home/pellegrini/.m2/repository/edu/ucar/cdm/4.5.5/cdm-4.5.5.jar:/home/pellegrini/.m2/repository/edu/ucar/udunits/4.5.5/udunits-4.5.5.jar:/home/pellegrini/.m2/repository/joda-time/joda-time/2.9.4/joda-time-2.9.4.jar:/home/pellegrini/.m2/repository/org/quartz-scheduler/quartz/2.2.0/quartz-2.2.0.jar:/home/pellegrini/.m2/repository/net/sf/ehcache/ehcache-core/2.6.2/ehcache-core-2.6.2.jar:/home/pellegrini/.m2/repository/com/beust/jcommander/1.35/jcommander-1.35.jar:/home/pellegrini/.m2/repository/com/mchange/c3p0/0.9.5.4/c3p0-0.9.5.4.jar:/home/pellegrini/.m2/repository/com/mchange/mchange-commons-java/0.2.15/mchange-commons-java-0.2.15.jar:/home/pellegrini/.m2/repository/edu/ucar/httpservices/4.5.5/httpservices-4.5.5.jar:/home/pellegrini/.m2/repository/org/apache/httpcomponents/httpclient/4.5.2/httpclient-4.5.2.jar:/home/pellegrini/.m2/repository/org/apache/httpcomponents/httpmime/4.5.2/httpmime-4.5.2.jar:/home/pellegrini/.m2/repository/org/apache/commons/commons-csv/1.7/commons-csv-1.7.jar:/home/pellegrini/.m2/repository/org/apache/sis/core/sis-utility/0.8/sis-utility-0.8.jar:/home/pellegrini/.m2/repository/javax/measure/unit-api/1.0/unit-api-1.0.jar:/home/pellegrini/.m2/repository/org/apache/sis/storage/sis-netcdf/0.8/sis-netcdf-0.8.jar:/home/pellegrini/.m2/repository/org/apache/sis/storage/sis-storage/0.8/sis-storage-0.8.jar:/home/pellegrini/.m2/repository/org/apache/sis/core/sis-feature/0.8/sis-feature-0.8.jar:/home/pellegrini/.m2/repository/org/apache/sis/core/sis-referencing/0.8/sis-referencing-0.8.jar:/home/pellegrini/.m2/repository/org/apache/sis/core/sis-metadata/0.8/sis-metadata-0.8.jar:/home/pellegrini/.m2/repository/org/opengis/geoapi/3.0.1/geoapi-3.0.1.jar:/home/pellegrini/.m2/repository/edu/usc/ir/sentiment-analysis-parser/0.1/sentiment-analysis-parser-0.1.jar:/home/pellegrini/.m2/repository/org/apache/pdfbox/jbig2-imageio/3.0.2/jbig2-imageio-3.0.2.jar:/home/pellegrini/.m2/repository/com/github/jai-imageio/jai-imageio-core/1.4.0/jai-imageio-core-1.4.0.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk/1.11.60/aws-java-sdk-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-support/1.11.60/aws-java-sdk-support-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/jmespath-java/1.11.60/jmespath-java-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-simpledb/1.11.60/aws-java-sdk-simpledb-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-servicecatalog/1.11.60/aws-java-sdk-servicecatalog-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-servermigration/1.11.60/aws-java-sdk-servermigration-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-simpleworkflow/1.11.60/aws-java-sdk-simpleworkflow-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-storagegateway/1.11.60/aws-java-sdk-storagegateway-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-route53/1.11.60/aws-java-sdk-route53-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-s3/1.11.60/aws-java-sdk-s3-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-importexport/1.11.60/aws-java-sdk-importexport-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-sts/1.11.60/aws-java-sdk-sts-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-sqs/1.11.60/aws-java-sdk-sqs-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-rds/1.11.60/aws-java-sdk-rds-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-redshift/1.11.60/aws-java-sdk-redshift-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elasticbeanstalk/1.11.60/aws-java-sdk-elasticbeanstalk-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-glacier/1.11.60/aws-java-sdk-glacier-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-iam/1.11.60/aws-java-sdk-iam-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-datapipeline/1.11.60/aws-java-sdk-datapipeline-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elasticloadbalancing/1.11.60/aws-java-sdk-elasticloadbalancing-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elasticloadbalancingv2/1.11.60/aws-java-sdk-elasticloadbalancingv2-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-emr/1.11.60/aws-java-sdk-emr-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elasticache/1.11.60/aws-java-sdk-elasticache-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elastictranscoder/1.11.60/aws-java-sdk-elastictranscoder-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-ec2/1.11.60/aws-java-sdk-ec2-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-dynamodb/1.11.60/aws-java-sdk-dynamodb-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-sns/1.11.60/aws-java-sdk-sns-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-budgets/1.11.60/aws-java-sdk-budgets-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudtrail/1.11.60/aws-java-sdk-cloudtrail-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudwatch/1.11.60/aws-java-sdk-cloudwatch-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-logs/1.11.60/aws-java-sdk-logs-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-events/1.11.60/aws-java-sdk-events-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cognitoidentity/1.11.60/aws-java-sdk-cognitoidentity-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cognitosync/1.11.60/aws-java-sdk-cognitosync-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-directconnect/1.11.60/aws-java-sdk-directconnect-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudformation/1.11.60/aws-java-sdk-cloudformation-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudfront/1.11.60/aws-java-sdk-cloudfront-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-kinesis/1.11.60/aws-java-sdk-kinesis-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-opsworks/1.11.60/aws-java-sdk-opsworks-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-ses/1.11.60/aws-java-sdk-ses-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-autoscaling/1.11.60/aws-java-sdk-autoscaling-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudsearch/1.11.60/aws-java-sdk-cloudsearch-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudwatchmetrics/1.11.60/aws-java-sdk-cloudwatchmetrics-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-codedeploy/1.11.60/aws-java-sdk-codedeploy-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-codepipeline/1.11.60/aws-java-sdk-codepipeline-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-kms/1.11.60/aws-java-sdk-kms-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-config/1.11.60/aws-java-sdk-config-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-lambda/1.11.60/aws-java-sdk-lambda-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-ecs/1.11.60/aws-java-sdk-ecs-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-ecr/1.11.60/aws-java-sdk-ecr-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cloudhsm/1.11.60/aws-java-sdk-cloudhsm-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-ssm/1.11.60/aws-java-sdk-ssm-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-workspaces/1.11.60/aws-java-sdk-workspaces-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-machinelearning/1.11.60/aws-java-sdk-machinelearning-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-directory/1.11.60/aws-java-sdk-directory-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-efs/1.11.60/aws-java-sdk-efs-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-codecommit/1.11.60/aws-java-sdk-codecommit-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-devicefarm/1.11.60/aws-java-sdk-devicefarm-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-elasticsearch/1.11.60/aws-java-sdk-elasticsearch-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-waf/1.11.60/aws-java-sdk-waf-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-marketplacecommerceanalytics/1.11.60/aws-java-sdk-marketplacecommerceanalytics-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-inspector/1.11.60/aws-java-sdk-inspector-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-iot/1.11.60/aws-java-sdk-iot-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-api-gateway/1.11.60/aws-java-sdk-api-gateway-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-acm/1.11.60/aws-java-sdk-acm-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-gamelift/1.11.60/aws-java-sdk-gamelift-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-dms/1.11.60/aws-java-sdk-dms-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-marketplacemeteringservice/1.11.60/aws-java-sdk-marketplacemeteringservice-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-cognitoidp/1.11.60/aws-java-sdk-cognitoidp-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-discovery/1.11.60/aws-java-sdk-discovery-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-applicationautoscaling/1.11.60/aws-java-sdk-applicationautoscaling-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-snowball/1.11.60/aws-java-sdk-snowball-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-core/1.11.60/aws-java-sdk-core-1.11.60.jar:/home/pellegrini/.m2/repository/software/amazon/ion/ion-java/1.0.1/ion-java-1.0.1.jar:/home/pellegrini/.m2/repository/com/fasterxml/jackson/dataformat/jackson-dataformat-cbor/2.8.3/jackson-dataformat-cbor-2.8.3.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-models/1.11.60/aws-java-sdk-models-1.11.60.jar:/home/pellegrini/.m2/repository/com/amazonaws/aws-java-sdk-swf-libraries/1.11.22/aws-java-sdk-swf-libraries-1.11.22.jar:/home/pellegrini/.m2/repository/io/openvidu/openvidu-java-client/2.2.0/openvidu-java-client-2.2.0.jar:/home/pellegrini/.m2/repository/junit/junit/4.12/junit-4.12.jar:/home/pellegrini/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-starter-test/1.4.1.RELEASE/spring-boot-starter-test-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-test/1.4.1.RELEASE/spring-boot-test-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/boot/spring-boot-test-autoconfigure/1.4.1.RELEASE/spring-boot-test-autoconfigure-1.4.1.RELEASE.jar:/home/pellegrini/.m2/repository/com/jayway/jsonpath/json-path/2.2.0/json-path-2.2.0.jar:/home/pellegrini/.m2/repository/net/minidev/json-smart/2.2.1/json-smart-2.2.1.jar:/home/pellegrini/.m2/repository/net/minidev/accessors-smart/1.1/accessors-smart-1.1.jar:/home/pellegrini/.m2/repository/org/assertj/assertj-core/2.5.0/assertj-core-2.5.0.jar:/home/pellegrini/.m2/repository/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar:/home/pellegrini/.m2/repository/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/home/pellegrini/.m2/repository/org/hamcrest/hamcrest-library/1.3/hamcrest-library-1.3.jar:/home/pellegrini/.m2/repository/org/skyscreamer/jsonassert/1.3.0/jsonassert-1.3.0.jar:/home/pellegrini/.m2/repository/org/json/json/20140107/json-20140107.jar:/home/pellegrini/.m2/repository/org/springframework/spring-core/4.3.3.RELEASE/spring-core-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/spring-test/4.3.3.RELEASE/spring-test-4.3.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/security/spring-security-test/4.1.3.RELEASE/spring-security-test-4.1.3.RELEASE.jar:/home/pellegrini/.m2/repository/org/springframework/security/spring-security-core/4.1.3.RELEASE/spring-security-core-4.1.3.RELEASE.jar:/home/pellegrini/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/home/pellegrini/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.0.0/junit-jupiter-api-5.0.0.jar:/home/pellegrini/.m2/repository/org/apiguardian/apiguardian-api/1.0.0/apiguardian-api-1.0.0.jar:/home/pellegrini/.m2/repository/org/opentest4j/opentest4j/1.0.0/opentest4j-1.0.0.jar:/home/pellegrini/.m2/repository/org/junit/platform/junit-platform-commons/1.0.0/junit-platform-commons-1.0.0.jar:/home/pellegrini/.m2/repository/io/github/bonigarcia/selenium-jupiter/1.1.2/selenium-jupiter-1.1.2.jar:/home/pellegrini/.m2/repository/io/appium/java-client/5.0.3/java-client-5.0.3.jar:/home/pellegrini/.m2/repository/cglib/cglib/3.2.5/cglib-3.2.5.jar:/home/pellegrini/.m2/repository/org/apache/ant/ant/1.9.6/ant-1.9.6.jar:/home/pellegrini/.m2/repository/org/apache/ant/ant-launcher/1.9.6/ant-launcher-1.9.6.jar:/home/pellegrini/.m2/repository/org/openpnp/opencv/3.2.0-1/opencv-3.2.0-1.jar:/home/pellegrini/.m2/repository/io/github/bonigarcia/webdrivermanager/1.7.2/webdrivermanager-1.7.2.jar:/home/pellegrini/.m2/repository/com/typesafe/config/1.2.1/config-1.2.1.jar:/home/pellegrini/.m2/repository/org/rauschig/jarchivelib/0.7.1/jarchivelib-0.7.1.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-java/3.4.0/selenium-java-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-edge-driver/3.4.0/selenium-edge-driver-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-ie-driver/2.53.1/selenium-ie-driver-2.53.1.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-opera-driver/3.4.0/selenium-opera-driver-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-safari-driver/2.53.1/selenium-safari-driver-2.53.1.jar:/home/pellegrini/.m2/repository/io/netty/netty/3.5.7.Final/netty-3.5.7.Final.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-support/2.53.1/selenium-support-2.53.1.jar:/home/pellegrini/.m2/repository/cglib/cglib-nodep/3.2.4/cglib-nodep-3.2.4.jar:/home/pellegrini/.m2/repository/org/w3c/css/sac/1.3/sac-1.3.jar:/home/pellegrini/.m2/repository/net/sourceforge/cssparser/cssparser/0.9.22/cssparser-0.9.22.jar:/home/pellegrini/.m2/repository/net/sourceforge/htmlunit/htmlunit/2.21/htmlunit-2.21.jar:/home/pellegrini/.m2/repository/net/sourceforge/htmlunit/htmlunit-core-js/2.26/htmlunit-core-js-2.26.jar:/home/pellegrini/.m2/repository/net/sourceforge/htmlunit/neko-htmlunit/2.25/neko-htmlunit-2.25.jar:/home/pellegrini/.m2/repository/org/apache/httpcomponents/httpcore/4.4.5/httpcore-4.4.5.jar:/home/pellegrini/.m2/repository/org/eclipse/jetty/jetty-io/9.3.11.v20160721/jetty-io-9.3.11.v20160721.jar:/home/pellegrini/.m2/repository/org/eclipse/jetty/jetty-util/9.3.11.v20160721/jetty-util-9.3.11.v20160721.jar:/home/pellegrini/.m2/repository/net/java/dev/jna/jna-platform/4.1.0/jna-platform-4.1.0.jar:/home/pellegrini/.m2/repository/com/codeborne/phantomjsdriver/1.4.0/phantomjsdriver-1.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/htmlunit-driver/2.21/htmlunit-driver-2.21.jar:/home/pellegrini/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/home/pellegrini/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.4.3.v20170317/websocket-api-9.4.3.v20170317.jar:/home/pellegrini/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.11.v20160721/websocket-client-9.3.11.v20160721.jar:/home/pellegrini/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.4.3.v20170317/websocket-common-9.4.3.v20170317.jar:/home/pellegrini/.m2/repository/xalan/serializer/2.7.2/serializer-2.7.2.jar:/home/pellegrini/.m2/repository/xalan/xalan/2.7.2/xalan-2.7.2.jar:/home/pellegrini/.m2/repository/xml-apis/xml-apis/1.4.01/xml-apis-1.4.01.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-chrome-driver/3.4.0/selenium-chrome-driver-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-firefox-driver/3.4.0/selenium-firefox-driver-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-api/3.4.0/selenium-api-3.4.0.jar:/home/pellegrini/.m2/repository/org/seleniumhq/selenium/selenium-remote-driver/3.4.0/selenium-remote-driver-3.4.0.jar:/home/pellegrini/.m2/repository/com/google/guava/guava/29.0-jre/guava-29.0-jre.jar:/home/pellegrini/.m2/repository/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/home/pellegrini/.m2/repository/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/pellegrini/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/home/pellegrini/.m2/repository/org/checkerframework/checker-qual/2.11.1/checker-qual-2.11.1.jar:/home/pellegrini/.m2/repository/com/google/errorprone/error_prone_annotations/2.3.4/error_prone_annotations-2.3.4.jar:/home/pellegrini/.m2/repository/com/google/j2objc/j2objc-annotations/1.3/j2objc-annotations-1.3.jar:/home/pellegrini/.m2/repository/org/junit/platform/junit-platform-runner/1.0.1/junit-platform-runner-1.0.1.jar:/home/pellegrini/.m2/repository/org/junit/platform/junit-platform-launcher/1.0.1/junit-platform-launcher-1.0.1.jar:/home/pellegrini/.m2/repository/org/junit/platform/junit-platform-suite-api/1.0.1/junit-platform-suite-api-1.0.1.jar:/home/pellegrini/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.0.0/junit-jupiter-engine-5.0.0.jar:/home/pellegrini/.m2/repository/org/junit/platform/junit-platform-engine/1.0.0/junit-platform-engine-1.0.0.jar:/home/pellegrini/.m2/repository/org/jetbrains/annotations/22.0.0/annotations-22.0.0.jar -jar " + hyperion_jar + " --extract-similarity conf.json",
                                            shell=True, stdout=sys.stdout, stderr=subprocess.STDOUT,
                                            env = my_env)
                 process.wait()
    
# Generate test groups
def test_groups():
     print("****** GENERATING TEST GROUPS *******")
     for metric in metrics:
         for domain in domains:
             for threshold in similarity_thresholds:
                 for rep in range(repetitions):
                     conf = ("{"
                             "\"invokes\": [\"" + prolog_facts + "\""
                             "],"
                             "\"similarityFile\": \"experiment/similarTPs-" + metric + "-" + domain +".json\","
                             "\"policy\": \""+ metric +"\","
                             "\"threshold\": " + str(threshold) + ","
                             "\"outputFile\": \"experiment/"+metric+"/"+domain+"-"+str(threshold)+"/"+str(rep)+"/testGroup.json\""
                             "}")
                     with open("conf.json",'w',encoding = 'utf-8') as f:
                         f.write(conf)
                         f.close()
                         process = subprocess.Popen("java -jar " + hyperion_jar + " --group-similar-tests conf.json",
                                                    shell=True, stdout=sys.stdout, stderr=subprocess.STDOUT,
                                                    env = my_env)
                         process.wait()


# Run the test suite to compute coverage
def get_coverage():
    print("****** COMPUTING COVERAGE *******")
    for metric in metrics:
        for domain in domains:
            for threshold in similarity_thresholds:
                for rep in range(repetitions):
                    f = open("experiment/"+metric+"/"+domain+"-"+str(threshold)+"/"+str(rep)+"/testGroup.json")
                    similar = json.load(f)
                    f.close()
                    test_list = ""
                    for test in similar['include']:
                        test_list += test.replace(":", "#") + ",\n"
                    with open(sut_path + "pom.xml",'w',encoding = 'utf-8') as dest:
                        with open(sut_path + "pom.xml.template",'r',encoding = 'utf-8') as tpl:
                            for line in tpl:
                                if "#include \"test-list\"" in line:
                                    dest.write(test_list)
                                else:
                                    dest.write(line)
                    process = subprocess.Popen("./src/test/resources/journal/coverage-trainticket.sh experiment/"+metric+"/"+domain+"-"+str(threshold)+"/"+str(rep)+"/",
                                               shell=True, stdout=sys.stdout, stderr=subprocess.STDOUT,
                                               env = my_env)
                    process.wait()


# Compute test coverage of single test programs
def single_test_coverage():
    print("***** SINGLE TEST COVERAGE ******")
    f = open("allTPs.json")
    allTests = json.load(f)
    f.close()

    for test in allTests:
        testString = test['className'] + "#" + test['methodName']
        os.makedirs("experiment/single-test/"+testString+"/", exist_ok=True)
        print(testString)

        with open(sut_path + "pom.xml",'w',encoding = 'utf-8') as dest:
            with open(sut_path + "pom.xml.template",'r',encoding = 'utf-8') as tpl:
                for line in tpl:
                    if "#include \"test-list\"" in line:
                        dest.write(testString)
                    else:
                        dest.write(line)
        process = subprocess.Popen("./src/test/resources/journal/coverage-fullteaching.sh experiment/single-test/"+testString+"/",
                                   shell=True, stdout=sys.stdout, stderr=subprocess.STDOUT,
                                   env = my_env)
        process.wait()


prepare_folders()
#run_symbolic()
#generate_similarity()
#test_groups()
get_coverage()
#single_test_coverage()
